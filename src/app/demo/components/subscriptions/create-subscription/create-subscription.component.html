<div id="create-offer"  fxLayout="row wrap" fxLayoutAlign="space-between center" fxFlex="100%">
    <p-toast></p-toast>
    <!-- departure-->
    <div fxLayout="column" fxLayoutAlign="space-between center" fxLayoutGap="10px" fxFlex="33.33">

        <div fxLayout="column" fxLayoutGap="8px" style="width: 100%">
            <span> Departure city </span>
            <div>
                <p-dropdown
                    [style]="{ width: '100%', height: '100%' }"
                    [options]="cities"
                    [(ngModel)]="cityFrom"
                    [disabled]="fromRequest"
                    (onChange)="onChangeCityFrom()"
                    filterBy="name"
                    [editable]="true"
                    [showClear]="true"
                    appendTo="body"
                    optionLabel="name"
                    placeholder="Leaving from "
                />
            </div>
        </div>
        <div fxLayout="column"  fxLayoutGap="8px" style="width: 100%">
            <span> Start date </span>
            <div>
                <p-calendar
                    [style]="{ width: '100%', height: '100%' }"
                    [(ngModel)]="startDate"
                    (ngModelChange)="handleBusDate()"
                    [disabled]="fromRequest"
                    dateFormat="DD , dd MM"
                    [showButtonBar]="true"
                    appendTo="body"
                    [minDate]="minDate"
                     [readonlyInput]="true"
                />
            </div>
        </div>
        <div fxLayout="column"  fxLayoutGap="8px" style="width: 100%">
            <span>  Departure time  </span>
            <div>
                <p-calendar
                    [style]="{ width: '100%', height: '100%' }"
                    [(ngModel)]="departureTime"
                    [timeOnly]="true"
                    appendTo="body"
                    [disabled]="fromRequest"
                    dateFormat="DD , dd MM"
                    [showButtonBar]="true"
                    [readonlyInput]="true"
                />
            </div>
        </div>
    </div>
    <!-- duration-->
    <div fxLayout="column" fxLayoutAlign="space-between center" fxFlex="33.33">
        <div *ngIf="!departureTime || !arrivalTime else duration"> Duration </div>
        <ng-template #duration>
            {{ dayjs(departureTime).format('HH:mm') | dateDifference : dayjs(arrivalTime).format('HH:mm') }}
        </ng-template>
    </div>
    <!-- arrival-->
    <div fxLayout="column" fxLayoutAlign="space-between center" fxLayoutGap="10px" fxFlex="33.33">
        <div fxLayout="column" fxLayoutGap="8px" style="width: 100%">
            <span> Arrival city </span>
            <div>
                <p-dropdown
                    [style]="{ width: '100%', height: '100%' }"
                    [options]="arrivalCities"
                    [(ngModel)]="arrivalCity"
                    (onChange)="onChangeCityArrival()"
                    filterBy="name"
                    [editable]="true"
                    [showClear]="true"
                    [disabled]="fromRequest"
                    appendTo="body"
                    optionLabel="name"
                    placeholder="Leaving To "
                />
            </div>
        </div>
        <div fxLayout="column"  fxLayoutGap="8px" style="width: 100%">
            <span> End date </span>
            <div>
                <p-calendar
                    [disabled]="!startDate || fromRequest"
                    [style]="{ width: '100%', height: '100%' }"
                    [(ngModel)]="endDateArrival"
                    dateFormat="DD , dd MM"
                    [showButtonBar]="true"
                    (ngModelChange)="handleBusDate()"
                    appendTo="body"
                    [minDate]="startDate"
                    [readonlyInput]="true"
                />
            </div>
        </div>
        <div fxLayout="column"  fxLayoutGap="8px" style="width: 100%">
            <span>  Arrival time  </span>
            <div>
                <p-calendar
                    [disabled]="!departureTime || fromRequest"
                    [style]="{ width: '100%', height: '100%' }"
                    [(ngModel)]="arrivalTime"
                     [timeOnly]="true"
                    appendTo="body"
                    dateFormat="DD , dd MM"
                    [showButtonBar]="true"
                    [minDate]="departureTime"
                    [readonlyInput]="true"
                />
            </div>
        </div>
    </div>
    <!-- buses -->
    <div  fxFlex="100%" class="buses"  fxLayout="row" fxLayoutAlign="space-between center" >
       <div style=" width: 100%; margin-top: 20px;margin-bottom: 20px" fxLayout="row" fxLayoutGap="10px">
           <div fxFlex="33.33" fxLayout="column" fxLayoutGap="8px">
               <div> Buses </div>
               <div style="width: 100%"  fxLayout="row" fxFlex="50%">
                   <p-multiSelect
                   [style]="{ width: '100%'}"
                   [options]="buses"
                   [disabled]="buses.length==0"
                   [(ngModel)]="busesSelection"
                   filterBy="registrationNumber"
                   [showClear]="true"
                   appendTo="body"
                   optionLabel="registrationNumber"
                   placeholder="select a buses"
               />
                   <p-button icon="pi pi-plus" (onClick)="createNewBus()" [text]="true"  [rounded]="true" severity="secondary" />
               </div>
              </div>
           <div fxFlex="33.33%"></div>
           <div fxFlex="33.33" fxLayout="column" fxLayoutGap="8px">
                   <div> Max Subscribers</div>
                   <div style="width: 100%"> <p-inputNumber [style]="{width:'100%'}"
                                                            [min]="0"                                                             [useGrouping]="false"
                                                            [(ngModel)]="maxSubscribers" />
                   </div>
               </div>
       </div>
    </div>


    <div fxFlex="100%"  fxLayout="row" fxLayoutAlign="center center">
        <p-button (onClick)="creatOffer()" label="Create" severity="info"  [raised]="true" [style]="{width:'100px'}" />
    </div>

</div>

